<!DOCTYPE html>
<html>
<head>
    <title>TarjimonUz</title>
    <meta charset="UTF-8">
    <style>
        body { background: #f5f7fa; font-family: Arial; margin: 0; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h2 { color: #1a73e8; text-align: center; margin: 0 0 5px 0; }
        .subtitle { text-align: center; color: #666; margin-bottom: 25px; font-size: 14px; }
        .language-row { display: flex; gap: 10px; margin-bottom: 20px; align-items: center; }
        select, textarea { width: 100%; padding: 14px; border: 2px solid #ddd; border-radius: 10px; font-size: 16px; }
        textarea { height: 150px; resize: vertical; }
        button { width: 100%; padding: 16px; background: #1a73e8; color: white; border: none; border-radius: 10px; font-size: 17px; cursor: pointer; margin: 15px 0; font-weight: bold; }
        button:hover { background: #0d5bb9; }
        .result { min-height: 120px; padding: 20px; border: 2px solid #4caf50; border-radius: 10px; background: #f9f9f9; font-size: 17px; margin: 20px 0; }
        .counter { text-align: right; color: #666; font-size: 14px; margin-top: 5px; }
        .loading { color: #1a73e8; text-align: center; padding: 10px; }
        .error { color: red; padding: 10px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>ğŸŒ TarjimonUz</h2>
        <div class="subtitle">Google Translate bilan - 7000+ so'zni tarjima qiling</div>
        
        <div class="language-row">
            <select id="fromLang">
                <option value="uz">O'zbekcha ğŸ‡ºğŸ‡¿</option>
                <option value="en">Inglizcha ğŸ‡ºğŸ‡¸</option>
                <option value="ru">Ruscha ğŸ‡·ğŸ‡º</option>
                <option value="tr">Turkcha ğŸ‡¹ğŸ‡·</option>
                <option value="ar">Arabcha ğŸ‡¸ğŸ‡¦</option>
                <option value="fa">Forscha ğŸ‡®ğŸ‡·</option>
                <option value="es">Ispancha ğŸ‡ªğŸ‡¸</option>
                <option value="fr">Fransuzcha ğŸ‡«ğŸ‡·</option>
                <option value="de">Nemischa ğŸ‡©ğŸ‡ª</option>
                <option value="zh">Xitoycha ğŸ‡¨ğŸ‡³</option>
                <option value="ko">Koreyscha ğŸ‡°ğŸ‡·</option>
                <option value="ja">Yaponcha ğŸ‡¯ğŸ‡µ</option>
            </select>
            <div style="font-size: 24px; color: #666;">â‡„</div>
            <select id="toLang">
                <option value="en">Inglizcha ğŸ‡ºğŸ‡¸</option>
                <option value="uz">O'zbekcha ğŸ‡ºğŸ‡¿</option>
                <option value="ru">Ruscha ğŸ‡·ğŸ‡º</option>
                <option value="tr">Turkcha ğŸ‡¹ğŸ‡·</option>
                <option value="ar">Arabcha ğŸ‡¸ğŸ‡¦</option>
                <option value="fa">Forscha ğŸ‡®ğŸ‡·</option>
                <option value="es">Ispancha ğŸ‡ªğŸ‡¸</option>
                <option value="fr">Fransuzcha ğŸ‡«ğŸ‡·</option>
                <option value="de">Nemischa ğŸ‡©ğŸ‡ª</option>
                <option value="zh">Xitoycha ğŸ‡¨ğŸ‡³</option>
                <option value="ko">Koreyscha ğŸ‡°ğŸ‡·</option>
                <option value="ja">Yaponcha ğŸ‡¯ğŸ‡µ</option>
            </select>
        </div>
        
        <textarea id="inputText" placeholder="Tarjima qilish uchun matn kiriting...">Salom, dunyo! Tarjimon dasturi ishlayapti.</textarea>
        <div class="counter" id="charCount">0 belgi</div>
        
        <button id="translateBtn">ğŸš€ Tarjima qilish</button>
        
        <div class="result" id="result">
            Natija bu yerda ko'rinadi...
        </div>
        
        <div style="display: flex; gap: 10px;">
            <button id="speakBtn" style="background: #4caf50;">ğŸ”Š Ovozli o'qish</button>
            <button id="copyBtn" style="background: #9c27b0;">ğŸ“‹ Nusxalash</button>
        </div>
    </div>

    <script>
        // GOOGLE TRANSLATE API
        async function translateWithGoogle(text, sourceLang, targetLang) {
            try {
                // Google Translate API (bepul)
                const url = https://translate.googleapis.com/translate_a/single?client=gtx&sl=${sourceLang}&tl=${targetLang}&dt=t&q=${encodeURIComponent(text)};

const response = await fetch(url);
                const data = await response.json();
                
                if (data && data[0] && data[0][0] && data[0][0][0]) {
                    return data[0][0][0];
                }
                throw new Error('Tarjima topilmadi');
            } catch (error) {
                console.error('Google Translate xatosi:', error);
                throw error;
            }
        }

        // ALTERNATIV API - MyMemory (zaxira)
        async function translateWithMyMemory(text, sourceLang, targetLang) {
            try {
                const url = https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${sourceLang}|${targetLang};
                const response = await fetch(url);
                const data = await response.json();
                
                if (data.responseData && data.responseData.translatedText) {
                    return data.responseData.translatedText;
                }
                throw new Error('MyMemory tarjima bermadi');
            } catch (error) {
                console.error('MyMemory xatosi:', error);
                throw error;
            }
        }

        // BELGILAR SANOQCHI
        function updateCharCount() {
            const text = document.getElementById('inputText').value;
            document.getElementById('charCount').textContent = text.length + ' belgi';
        }

        // ASOSIY TARJIMA FUNKSIYASI
        async function translateNow() {
            const text = document.getElementById('inputText').value.trim();
            const fromLang = document.getElementById('fromLang').value;
            const toLang = document.getElementById('toLang').value;
            const resultDiv = document.getElementById('result');
            
            if (!text) {
                resultDiv.innerHTML = '<div class="error">âœ— Iltimos, matn kiriting!</div>';
                return;
            }
            
            if (text.length > 5000) {
                resultDiv.innerHTML = '<div class="error">âœ— Matn 5000 belgidan oshmasligi kerak!</div>';
                return;
            }
            
            resultDiv.innerHTML = '<div class="loading">â³ Tarjima qilinmoqda...</div>';
            
            try {
                // 1. Google Translate bilan urinib koâ€˜rish
                let translated = await translateWithGoogle(text, fromLang, toLang);
                resultDiv.innerHTML = translated;
            } catch (googleError) {
                try {
                    // 2. Agar Google ishlamasa, MyMemory bilan urinib koâ€˜rish
                    resultDiv.innerHTML = '<div class="loading">â³ Zaxira tizim orqali tarjima...</div>';
                    let translated = await translateWithMyMemory(text, fromLang, toLang);
                    resultDiv.innerHTML = translated;
                } catch (memoryError) {
                    // 3. Ikkalasi ham ishlamasa, xato
                    resultDiv.innerHTML = '<div class="error">âœ— Internet yoki API muammosi. Internet aloqangizni tekshiring.</div>';
                }
            }
        }

        // OVOZLI O'QISH
        function speakResult() {
            const text = document.getElementById('result').innerText;
            
            if (!text  text.includes('Natija')  text.includes('âœ—')  text.includes('â³')) {
                alert('Avval muvaffaqiyatli tarjima qiling!');
                return;
            }
            
            if ('speechSynthesis' in window) {
                const speech = new SpeechSynthesisUtterance(text);
                speech.lang = document.getElementById('toLang').value + '-' + document.getElementById('toLang').value.toUpperCase();
                speech.rate = 0.9;
                speech.volume = 1;
                window.speechSynthesis.speak(speech);
            } else {
                alert('Brauzeringiz ovozli o\'qishni qo\'llamaydi');
            }
        }



        // NATIJANI NUSXALASH
        function copyResult() {
            const text = document.getElementById('result').innerText;
            
            if (!text  text.includes('Natija')  text.includes('âœ—')  text.includes('â³')) {
                alert('Nusxalash uchun natija mavjud emas!');
                return;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                alert('Natija nusxalandi! ğŸ“‹');
            });
        }

        // SAYT YUKLANGANDA
        document.addEventListener('DOMContentLoaded', function() {
            // Tugmalarni bog'lash
            document.getElementById('translateBtn').addEventListener('click', translateNow);
            document.getElementById('speakBtn').addEventListener('click', speakResult);
            document.getElementById('copyBtn').addEventListener('click', copyResult);
            
            // Matn o'zgarganda belgilar sonini yangilash
            document.getElementById('inputText').addEventListener('input', updateCharCount);
            
            // Boshlang'ich hisoblash
            updateCharCount();
            
            // Enter tugmasi bilan tarjima qilish
            document.getElementById('inputText').addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'Enter') {
                    translateNow();
                }
            });
        });
    </script>
</body>
</html>




